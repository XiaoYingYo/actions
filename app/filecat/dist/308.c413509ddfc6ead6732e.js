/*! For license information please see 308.c413509ddfc6ead6732e.js.LICENSE.txt */
"use strict";(self.webpackChunkfilecat=self.webpackChunkfilecat||[]).push([[308],{5308:(t,e,n)=>{n.r(e),n.d(e,{default:()=>S});var r=n(6540),o=n(7444),a=n(6417),i=n(4289),c=n(6007),u=n(5726),f=n(2042),l=n(7022),s=n(8247),d=n(7767);function y(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,f=Object.create(u.prototype);return p(f,"_invoke",function(n,r,o){var a,c,u,f=0,l=o||[],s=!1,d={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return a=e,c=0,u=t,d.n=n,i}};function y(n,r){for(c=n,u=r,e=0;!s&&f&&!o&&e<l.length;e++){var o,a=l[e],y=d.p,p=a[2];n>3?(o=p===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=y&&((o=n<2&&y<a[1])?(c=0,d.v=r,d.n=a[1]):y<p&&(o=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,d.n=p,c=0))}if(o||n>1)return i;throw s=!0,r}return function(o,l,p){if(f>1)throw TypeError("Generator is already running");for(s&&1===l&&y(l,p),c=l,u=p;(e=c<2?t:u)||!s;){a||(c?c<3?(c>1&&(d.n=-1),y(c,u)):d.n=u:d.v=u);try{if(f=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(s=d.n<0)?u:n.call(r,d))!==i)break}catch(e){a=t,c=1,u=e}finally{f=1}}return{value:e,done:s}}}(n,o,a),!0),f}var i={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(p(e={},r,function(){return this}),e),s=f.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,p(t,o,"GeneratorFunction")),t.prototype=Object.create(s),t}return u.prototype=f,p(s,"constructor",f),p(f,"constructor",u),u.displayName="GeneratorFunction",p(f,o,"GeneratorFunction"),p(s),p(s,o,"Generator"),p(s,r,function(){return this}),p(s,"toString",function(){return"[object Generator]"}),(y=function(){return{w:a,m:d}})()}function p(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}p=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){p(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},p(t,e,n,r)}function m(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){m(a,r,o,i,c,"next",t)}function c(t){m(a,r,o,i,c,"throw",t)}i(void 0)})}}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,f=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(f)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var g,w=!1,A=1024e3;function S(){var t=b((0,o.L4)(a.A.image_editor),2),e=t[0],n=t[1],p=(0,d.Zp)(),m=((0,d.zy)(),function(){var t=v(y().m(function t(){var r,o,a,d,m;return y().w(function(t){for(;;)switch(t.n){case 0:if(w){t.n=4;break}return t.p=1,t.n=2,(0,u.J)("filerobot-image-editor.min.js");case 2:w=!0,t.n=4;break;case 3:return t.p=3,t.v,(0,f.zN)("加载资源失败"),t.a(2);case 4:r=(0,i.GG)("file",e.path),o=window.FilerobotImageEditor,a=o.TABS,d=o.TOOLS,m={defaultSavedImageName:e.name,source:c.$M.getDownloadUrl(r),onSave:function(){var t=v(y().m(function t(n,o){var a,u,d,p,m,v,b,h,g;return y().w(function(t){for(;;)switch(t.n){case 0:if(u=n.imageBase64.split(",")[1],n.mimeType,d=n.extension,p=null!==(a=n.name)&&void 0!==a?a:e.name,m="base64/save/".concat(encodeURIComponent("".concat((0,i.Yp)(r)).concat(p,".").concat(d))),!(u.length<=A)){t.n=2;break}return v={base64_context:u,type:l.t7.all},t.n=1,c.$M.post(m,v);case 1:t.n=6;break;case 2:return b=(0,s.L6)(u,A),(h={base64_context:b[0],type:l.t7.start}).type=l.t7.part,t.n=3,c.$M.post(m+"?type".concat(l.t7.start),h);case 3:g=1;case 4:if(!(g<b.length)){t.n=6;break}return h.base64_context=b[g],t.n=5,c.$M.post(m,h);case 5:g++,t.n=4;break;case 6:(0,f.LW)("保存成功");case 7:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),annotationsCommon:{fill:"#151717",stroke:"#ec0f42",shadowColor:"#151717"},Text:{text:""},Rotate:{angle:90,componentType:"slider"},tabsIds:[Object.values(a)],defaultTabId:a.ANNOTATE,defaultToolId:d.ANNOTATE},(g=new o(document.querySelector("#editor_container"),m)).render({onClose:function(t){g.terminate(),n({}),p((0,i.vX)())}});case 5:return t.a(2)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}());return(0,r.useEffect)(function(){return m(),function(){g&&g.terminate()}},[]),r.createElement("div",{id:"image-editor-container"},r.createElement("div",{className:"image-editor-context"},r.createElement("div",{id:"editor_container",className:"image-editor-context"})))}},5726:(t,e,n)=>{function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){u=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return new Promise(function(e){var n=0,o=[];if(void 0!==t.items){var a,i=r(t.items);try{for(i.s();!(a=i.n()).done;){var c=a.value;if("file"===c.kind&&"function"==typeof c.webkitGetAsEntry)u(c.webkitGetAsEntry())}}catch(t){i.e(t)}finally{i.f()}}else e(t.files);function u(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t.isFile)n++,t.file(function(t){n--,t.fullPath="".concat(r).concat(t.name),o.push(t),0===n&&e(o)});else if(t.isDirectory){var a={isDir:!0,size:0,fullPath:"".concat(r).concat(t.name),name:t.name};o.push(a),f(t.createReader(),"".concat(r).concat(t.name))}}function f(t,a){n++,t.readEntries(function(i){if(n--,i.length>0){var c,l=r(i);try{for(l.s();!(c=l.n()).done;){u(c.value,"".concat(a,"/"))}}catch(t){l.e(t)}finally{l.f()}f(t,"".concat(a,"/"))}0===n&&e(o)})}})}function i(t){return new Promise(function(e,n){var r=document.createElement("script");r.src=t,r.async=!0,r.onload=function(){e(null),console.log("脚本加载完成")},r.onerror=function(){n(n),console.error("脚本加载失败")},document.body.appendChild(r)})}n.d(e,{J:()=>i,T:()=>a})}}]);