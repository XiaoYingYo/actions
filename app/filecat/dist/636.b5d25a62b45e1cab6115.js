/*! For license information please see 636.b5d25a62b45e1cab6115.js.LICENSE.txt */
"use strict";(self.webpackChunkfilecat=self.webpackChunkfilecat||[]).push([[636],{1636:(e,n,t)=>{t.r(n),t.d(n,{default:()=>O});var r=t(2389),o=t(6540),i=t(7444),a=t(6417),c=t(4238),u=t(4944),l=t(447),f=t(5997),s=t(7952),d=t(5725),m=t(7071),v=t(4289),y=t(8062),p=t(7856);function h(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return w(l,"_invoke",function(t,r,o){var i,c,u,l=0,f=o||[],s=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return i=n,c=0,u=e,d.n=t,a}};function m(t,r){for(c=t,u=r,n=0;!s&&l&&!o&&n<f.length;n++){var o,i=f[n],m=d.p,v=i[2];t>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=t<2&&m<i[1])?(c=0,d.v=r,d.n=i[1]):m<v&&(o=t<3||i[0]>r||r>v)&&(i[4]=t,i[5]=r,d.n=v,c=0))}if(o||t>1)return a;throw s=!0,r}return function(o,f,v){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,v),c=f,u=v;(n=c<2?e:u)||!s;){i||(c?c<3?(c>1&&(d.n=-1),m(c,u)):d.n=u:d.v=u);try{if(l=2,i){if(c||(o="next"),n=i[o]){if(!(n=n.call(i,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,c<2&&(c=0)}else 1===c&&(n=i.return)&&n.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((n=(s=d.n<0)?u:t.call(r,d))!==a)break}catch(n){i=e,c=1,u=n}finally{l=1}}return{value:n,done:s}}}(t,o,i),!0),l}var a={};function c(){}function u(){}function l(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(w(n={},r,function(){return this}),n),s=l.prototype=c.prototype=Object.create(f);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,w(e,o,"GeneratorFunction")),e.prototype=Object.create(s),e}return u.prototype=l,w(s,"constructor",l),w(l,"constructor",u),u.displayName="GeneratorFunction",w(l,o,"GeneratorFunction"),w(s),w(s,o,"Generator"),w(s,r,function(){return this}),w(s,"toString",function(){return"[object Generator]"}),(h=function(){return{w:i,m:d}})()}function w(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}w=function(e,n,t,r){if(n)o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{var i=function(n,t){w(e,n,function(e){return this._invoke(n,t,e)})};i("next",0),i("throw",1),i("return",2)}},w(e,n,t,r)}function b(e,n,t,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void t(e)}c.done?n(u):Promise.resolve(u).then(r,o)}function g(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var i=e.apply(n,t);function a(e){b(i,r,o,a,c,"next",e)}function c(e){b(i,r,o,a,c,"throw",e)}a(void 0)})}}function k(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(c)throw i}}}}function E(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=i.call(t)).done)&&(c.push(r.value),c.length!==n);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,n)||_(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,n){if(e){if("string"==typeof e)return x(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(e,n):void 0}}function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var S,j,C=o.lazy(function(){return t.e(614).then(t.bind(t,5614))});function O(e){var n=(0,r.Bd)().t,t=E((0,i.L4)(a.A.workflow_realtime_show),2),w=t[0],b=t[1],_=E((0,o.useState)([]),2),x=(_[0],_[1],E((0,o.useState)([]),2)),O=(x[0],x[1],E((0,o.useState)(!1),2)),A=O[0],M=O[1],F=E((0,o.useState)(void 0),2),P=F[0],T=F[1],G=E((0,o.useState)([]),2),q=G[0],I=G[1],N=function(e){var n,t=k(e);try{for(t.s();!(n=t.n()).done;){var r,i,a,c=n.value;(null==c||null===(r=c.extra_data)||void 0===r?void 0:r.running_type)===m.rl.success?c.name=o.createElement("div",null,o.createElement(l.fq,{success:!0}),c.name):(null==c||null===(i=c.extra_data)||void 0===i?void 0:i.running_type)===m.rl.fail?c.name=o.createElement("div",null,o.createElement(l.fq,{success:!1}),c.name):(null==c||null===(a=c.extra_data)||void 0===a?void 0:a.running_type)===m.rl.running&&(c.name=o.createElement("div",null,o.createElement(l.fq,{running:!0}),c.name)),c.children&&N(c.children)}}catch(e){t.e(e)}finally{t.f()}},B=function(){var e=g(h().m(function e(n){var t;return h().w(function(e){for(;;)switch(e.n){case 0:(t=new m.v3).filename_path="".concat((0,v.GG)("file",(0,v.vX)())).concat(w.filename),u.ws.addMsg(c.HK.workflow_realtime_one_rsq,function(e){if(e.context.list&&e.context.list.length>0){var n=e.context.list;N(n),I(n)}e.context.new_log&&K(e.context.new_log)}),u.ws.sendData(c.HK.workflow_realtime_one_req,t);case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),H=function(){var e=g(h().m(function e(){var n;return h().w(function(e){for(;;)switch(e.n){case 0:n=new p.Terminal({fontFamily:"Monaco, Menlo, Consolas, 'Courier New', monospace",theme:{background:"#FFFFFF",foreground:"#000000",cursor:"#000000",selectionBackground:"#a6d2ff"},cursorBlink:!0,cursorStyle:"bar",scrollback:1e3,scrollSensitivity:1,tabStopWidth:4,convertEol:!0}),j=n,T(n);case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)(function(){return M(!1),S=void 0,j=void 0,B(),g(h().m(function e(){return h().w(function(e){for(;;)switch(e.n){case 0:u.ws.removeMsg(c.HK.workflow_realtime_one_rsq),j&&(j.dispose(),j=null);case 1:return e.a(2)}},e)}))},[]);var K=function(){var e=g(h().m(function e(n){return h().w(function(e){for(;;)switch(e.n){case 0:if(j){e.n=1;break}return e.n=1,new Promise(function(e){S=e,M(!0),H()});case 1:n&&j.write(n);case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}();return o.createElement("div",null,o.createElement(s.A,null,P&&o.createElement(f.rA,{icon:"print",title:"打印日志",onClick:function(){M(!A)}}),o.createElement(f.rA,{icon:"close",title:n("关闭"),onClick:function(){b({open:!1})}})),o.createElement(d.jW,{isFull:!0,more:!0},o.createElement(d.NN,null,o.createElement(y.A,{list:q,click:function(e){}}))),o.createElement("div",{style:{display:A?"":"none"}},o.createElement(C,{show:!0,terminal:P,init:function(){S&&(S(1),S=void 0)}})))}},8062:(e,n,t)=>{t.d(n,{A:()=>c});var r=t(6540);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(null,arguments)}function i(e){return r.createElement("div",{className:"black-tip",onClick:function(){e.click&&e.click(e)},onContextMenu:function(n){n.stopPropagation(),n.nativeEvent.stopImmediatePropagation(),e.onContextMenu&&e.onContextMenu(n,e)}},e.name)}var a=function(e){return r.createElement("li",null,e.click?r.createElement(i,o({},e.node,{name:e.render?e.render(e.node):e.node.name,click:e.click,onContextMenu:e.onContextMenu})):r.createElement("div",null,e.render?e.render(e.node):e.node.name),e.node.children&&e.node.children.length>0&&r.createElement("ul",null,e.node.children.map(function(n,t){return r.createElement(a,{key:t,node:n,click:e.click,onContextMenu:e.onContextMenu,render:e.render})})))};const c=function(e){return r.createElement("div",{className:"card-tree-view"},r.createElement("ul",null,e.list&&e.list.map(function(n,t){return r.createElement(a,{key:t,node:n,click:e.click,onContextMenu:e.onContextMenu,render:e.render})})))}}}]);