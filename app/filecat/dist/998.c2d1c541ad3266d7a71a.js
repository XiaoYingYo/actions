/*! For license information please see 998.c2d1c541ad3266d7a71a.js.LICENSE.txt */
"use strict";(self.webpackChunkfilecat=self.webpackChunkfilecat||[]).push([[998],{447:(e,t,n)=>{n.d(t,{WA:()=>m,ZI:()=>h,Zp:()=>d,fq:()=>y,gz:()=>_,uF:()=>f,xP:()=>p});var r=n(6540),o=n(3413),c=n.n(o),i=n(505);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,i,a=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){return e[e.common=0]="common",e[e.full=1]="full",e}(s||{});function u(e,t){var n=t===s.common?"card-content":t===s.full?"card-content full":"";return r.createElement("div",{className:"card",style:{}},r.createElement("div",{className:"card-title"},e.self_title?e.self_title:r.createElement("h2",null,e.title),r.createElement("div",{className:"not-select-div"},e.titleCom&&e.titleCom)),r.createElement("div",{className:n},e.children),r.createElement("div",{className:"card-action card-action-bottom-right"},e.rightBottomCom))}function d(e){return u(e,s.common)}function f(e){return u(e,s.full)}function p(e){var t,n,o,a=(0,r.useRef)(null);return r.createElement("div",{className:"card-text"},r.createElement("div",{className:"card-text-context"},null!==(t=e.context)&&void 0!==t?t:e.children),r.createElement("div",{className:"card-text-tip",ref:a,onClick:function(){var t,n;(0,i.l)(null!==(t=null!==(n=e.tip_context)&&void 0!==n?n:e.context)&&void 0!==t?t:e.children),new(c())({type:"info",text:"复制完成",timeout:1e3,layout:"bottomLeft"}).show()}},null!==(n=null!==(o=e.tip_context)&&void 0!==o?o:e.context)&&void 0!==n?n:e.children))}function m(e){var t,n;return r.createElement("div",{className:"card-text"},r.createElement("div",{className:"card-text-context"},null!==(t=e.context)&&void 0!==t?t:e.children),r.createElement("div",{className:"card-text-tip"},null!==(n=e.context)&&void 0!==n?n:e.children))}function h(e){var t,n;return r.createElement("div",{className:"card floating",onKeyPress:function(t){"Enter"===t.key&&e.confirm_enter&&e.confirm_enter()}},r.createElement("div",{className:"card-title"},r.createElement("h2",null,e.title)),r.createElement("div",{className:"card-content"},e.context&&e.context.map(function(e,t){return r.createElement("div",{key:t},e)})),r.createElement("div",{className:"card-action"},r.createElement("button",{className:"button button--flat button--grey",onClick:e.cancel},null!==(t=e.cancel_t)&&void 0!==t?t:"cancel"),r.createElement("button",{className:"button button--flat",onClick:e.confirm},null!==(n=e.confirm_t)&&void 0!==n?n:"confirm")))}function _(e){return r.createElement("div",{className:"progress-card"},r.createElement("div",{className:"progress-per"},r.createElement("div",{style:{width:"".concat(e.progress,"%")}})))}var y=function(e){var t=a((0,r.useState)("var(--iconTertiary)"),2),n=t[0],o=t[1];(0,r.useEffect)(function(){void 0===e.ok?void 0===e.success?void 0!==e.running&&o("var(--icon-yellow)"):!0===e.success?o("var(--icon-green)"):!1===e.success&&o("var(--icon-red)"):o(e.ok?"var(--icon-green)":"var(--iconTertiary)")},[e]);var c={width:"10px",height:"10px",borderRadius:"50%",backgroundColor:n,display:"inline-block"};return r.createElement("div",{style:c})}},3033:(e,t,n)=>{n.d(t,{$Z:()=>s,GL:()=>h,Sm:()=>d,U6:()=>m,cA:()=>f,l6:()=>p});var r=n(6540);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,i,a=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=(0,r.useRef)(null),n=a(r.useState(""),2),o=n[0],c=n[1];return(0,r.useEffect)(function(){var n=e.value;null==n&&(n=""),t.current.value=n,c(e.value||"")},[e.value]),r.createElement("div",{id:"search",className:"",style:{maxWidth:e.max_width,display:e.not_mobile?"block":void 0}},r.createElement("div",{id:"input"},r.createElement("i",{className:"material-icons"},e.icon),r.createElement("input",{type:"text",ref:t,placeholder:o||e.placeholder,onChange:function(t){e.handleInputChange&&e.handleInputChange(t.target.value,t.target),c(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.handleEnterPress&&e.handleEnterPress()}})))}function u(e){var t=(0,r.useRef)(null),n=a(r.useState(""),2),o=n[0],c=n[1],i=a(r.useState("input input--block"),2),l=i[0],s=i[1];return(0,r.useEffect)(function(){c(void 0===e.value||null===e.value?"":e.value),e.focus&&t.current.focus(),e.no_border&&s("".concat(l," input--no_border"))},[e.value]),r.createElement(r.Fragment,null,e.placeholderOut&&r.createElement("p",null,e.placeholderOut),r.createElement("div",{style:{display:"flex",alignItems:"center",width:e.width,maxWidth:e.maxWidth}},e.left_placeholder&&r.createElement("div",{style:{paddingRight:".3rem",width:"auto",whiteSpace:"nowrap"}},e.left_placeholder),r.createElement("input",{onClick:function(e){e.stopPropagation()},disabled:!!e.disabled,className:l,type:e.type,placeholder:o||e.placeholder,onChange:function(t){e.handleInputChange&&e.handleInputChange(t.target.value,t.target),c(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.handlerEnter&&e.handlerEnter(t.target.value)},value:o,ref:t}),e.right_placeholder&&r.createElement("div",{style:{paddingLeft:".3rem",width:"auto",whiteSpace:"nowrap"}},e.right_placeholder)))}function d(e){return u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e))}function f(e){return u({placeholder:e.placeholder,type:"password",handleInputChange:e.handleInputChange,handlerEnter:e.handleEnterPress,maxWidth:e.maxWidth,width:e.width})}function p(e){return r.createElement("div",{style:{display:"flex"}},e.tip&&r.createElement("p",{className:"input input_left "},e.tip),r.createElement("select",{defaultValue:e.defaultValue,value:e.value,style:{width:e.width},disabled:!!e.disabled,className:"input input--block  ".concat(e.no_border?"input--no_border":""),onChange:function(t){return e.onChange(t.target.value)}},e.options.map(function(e,t){return r.createElement("option",{key:t,value:e.value},e.title)})))}function m(e){var t;return r.createElement("div",{className:"input_radio_row"},r.createElement("input",{type:"radio",checked:e.selected,name:null!==(t=e.name)&&void 0!==t?t:"common_name",value:e.value,className:"input_radio",onChange:function(){e.onchange&&e.onchange(e.value)}}),e.context)}function h(e){var t,n=a((0,r.useState)(!1),2),o=n[0],c=n[1];return(0,r.useEffect)(function(){c(!!e.selected)},[e.selected]),r.createElement("div",{className:"input_radio_row"},r.createElement("input",{type:"checkbox",disabled:null!==(t=e.is_disable)&&void 0!==t&&t,checked:o,onChange:function(){e.onchange&&e.onchange()}}),e.context)}},4238:(e,t,n)=>{n.d(t,{HK:()=>d,b$:()=>u,hF:()=>f,hf:()=>p});var r=n(7613),o=n(1869),c=n(3459);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var s=new o.Nz,u=!0,d=function(e){return e[e.connection=0]="connection",e[e.sys_get=1]="sys_get",e[e.sys_getting=2]="sys_getting",e[e.shell_open=3]="shell_open",e[e.shell_send=4]="shell_send",e[e.shell_getting=5]="shell_getting",e[e.shell_copy=6]="shell_copy",e[e.docker_get=7]="docker_get",e[e.docker_getting=8]="docker_getting",e[e.docker_shell_logs=9]="docker_shell_logs",e[e.docker_shell_logs_getting=10]="docker_shell_logs_getting",e[e.docker_shell_logs_cancel=11]="docker_shell_logs_cancel",e[e.docker_shell_exec_open=12]="docker_shell_exec_open",e[e.docker_shell_exec=13]="docker_shell_exec",e[e.docker_shell_exec_getting=14]="docker_shell_exec_getting",e[e.docker_shell_exec_cancel=15]="docker_shell_exec_cancel",e[e.docker_switch=16]="docker_switch",e[e.docker_del_container=17]="docker_del_container",e[e.process_get=18]="process_get",e[e.process_getting=19]="process_getting",e[e.process_close=20]="process_close",e[e.systemd_inside_get=21]="systemd_inside_get",e[e.systemd_inside_getting=22]="systemd_inside_getting",e[e.systemd_logs_get=23]="systemd_logs_get",e[e.systemd_logs_getting=24]="systemd_logs_getting",e[e.remote_shell_open=25]="remote_shell_open",e[e.remote_shell_send=26]="remote_shell_send",e[e.remote_shell_getting=27]="remote_shell_getting",e[e.remote_shell_cancel=28]="remote_shell_cancel",e[e.remote_shell_cd=29]="remote_shell_cd",e[e.infos=30]="infos",e[e.connect=31]="connect",e[e.rdp_connect=32]="rdp_connect",e[e.rdp_bitmap=33]="rdp_bitmap",e[e.rdp_close=34]="rdp_close",e[e.rdp_error=35]="rdp_error",e[e.mouse=36]="mouse",e[e.wheel=37]="wheel",e[e.scancode=38]="scancode",e[e.unicode=39]="unicode",e[e.rdp_disconnect=40]="rdp_disconnect",e[e.vir_net_serverIno_get=41]="vir_net_serverIno_get",e[e.vir_net_client_get=42]="vir_net_client_get",e[e.file_info=43]="file_info",e[e.file_video_trans=44]="file_video_trans",e[e.file_video_trans_progress=45]="file_video_trans_progress",e[e.file_uncompress=46]="file_uncompress",e[e.file_uncompress_progress=47]="file_uncompress_progress",e[e.file_compress=48]="file_compress",e[e.file_compress_progress=49]="file_compress_progress",e[e.file_upload_pre=50]="file_upload_pre",e[e.file_upload=51]="file_upload",e[e.log_viewer=52]="log_viewer",e[e.log_viewer_watch=53]="log_viewer_watch",e[e.search_file=54]="search_file",e[e.search_file_progress=55]="search_file_progress",e[e.search_file_index=56]="search_file_index",e[e.search_file_cancel=57]="search_file_cancel",e[e.http_download_water=58]="http_download_water",e[e.http_download_cancel=59]="http_download_cancel",e[e.rtsp_get=60]="rtsp_get",e[e.rtsp_cancel=61]="rtsp_cancel",e[e.workflow_exec=62]="workflow_exec",e[e.workflow_get=63]="workflow_get",e[e.workflow_realtime=64]="workflow_realtime",e[e.workflow_realtime_one_req=65]="workflow_realtime_one_req",e[e.workflow_realtime_one_rsq=66]="workflow_realtime_one_rsq",e[e.workflow_search_by_run_name=67]="workflow_search_by_run_name",e}({}),f=function(e){return e[e.data=0]="data",e[e.other=1]="other",e}({}),p=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cmdType=t,this.context=n,this.bin_context=r,this.code=c.m.Sucess,this.random_id=o}return t=e,i=[{key:"decode",value:function(t){var n=r.WsMessage.decode(t),o=n.context;if("string"==typeof o&&o)try{o=JSON.parse(o)}catch(e){console.log(e),o=n.context}var c=new e(n.cmdType,o,n.binContext);return c.code=n.code,c.message=n.message,c.random_id=n.randomId,c}}],(n=[{key:"encode",value:function(){if(u)return r.WsMessage.encode(r.WsMessage.create({cmdType:this.cmdType,context:JSON.stringify(this.context),code:this.code,message:this.message,binContext:this.bin_context,randomId:this.random_id})).finish();var e={type:o.LP.EVENT,data:[this.cmdType,this.context,this.code,this.message,this.random_id]};return s.encode(e)}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}()},4944:(e,t,n)=>{n.d(t,{ws:()=>r});var r=new(n(8965).I)(window.location.host+window.location.pathname,function(e){},"全局")},7613:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o=n(6946),c=o.Reader,i=o.Writer,a=o.util,l=o.roots.default||(o.roots.default={});l.WsMessage=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.cmdType=0,e.prototype.context="",e.prototype.binContext=a.newBuffer([]),e.prototype.message="",e.prototype.code=0,e.prototype.randomId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.cmdType&&Object.hasOwnProperty.call(e,"cmdType")&&t.uint32(8).int32(e.cmdType),null!=e.context&&Object.hasOwnProperty.call(e,"context")&&t.uint32(18).string(e.context),null!=e.binContext&&Object.hasOwnProperty.call(e,"binContext")&&t.uint32(26).bytes(e.binContext),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(34).string(e.message),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(40).int32(e.code),null!=e.randomId&&Object.hasOwnProperty.call(e,"randomId")&&t.uint32(50).string(e.randomId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new l.WsMessage;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.cmdType=e.int32();break;case 2:r.context=e.string();break;case 3:r.binContext=e.bytes();break;case 4:r.message=e.string();break;case 5:r.code=e.int32();break;case 6:r.randomId=e.string();break;default:e.skipType(7&o)}}return r},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==r(e)||null===e?"object expected":null!=e.cmdType&&e.hasOwnProperty("cmdType")&&!a.isInteger(e.cmdType)?"cmdType: integer expected":null!=e.context&&e.hasOwnProperty("context")&&!a.isString(e.context)?"context: string expected":null!=e.binContext&&e.hasOwnProperty("binContext")&&!(e.binContext&&"number"==typeof e.binContext.length||a.isString(e.binContext))?"binContext: buffer expected":null!=e.message&&e.hasOwnProperty("message")&&!a.isString(e.message)?"message: string expected":null!=e.code&&e.hasOwnProperty("code")&&!a.isInteger(e.code)?"code: integer expected":null!=e.randomId&&e.hasOwnProperty("randomId")&&!a.isString(e.randomId)?"randomId: string expected":null},e.fromObject=function(e){if(e instanceof l.WsMessage)return e;var t=new l.WsMessage;return null!=e.cmdType&&(t.cmdType=0|e.cmdType),null!=e.context&&(t.context=String(e.context)),null!=e.binContext&&("string"==typeof e.binContext?a.base64.decode(e.binContext,t.binContext=a.newBuffer(a.base64.length(e.binContext)),0):e.binContext.length>=0&&(t.binContext=e.binContext)),null!=e.message&&(t.message=String(e.message)),null!=e.code&&(t.code=0|e.code),null!=e.randomId&&(t.randomId=String(e.randomId)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.cmdType=0,n.context="",t.bytes===String?n.binContext="":(n.binContext=[],t.bytes!==Array&&(n.binContext=a.newBuffer(n.binContext))),n.message="",n.code=0,n.randomId=""),null!=e.cmdType&&e.hasOwnProperty("cmdType")&&(n.cmdType=e.cmdType),null!=e.context&&e.hasOwnProperty("context")&&(n.context=e.context),null!=e.binContext&&e.hasOwnProperty("binContext")&&(n.binContext=t.bytes===String?a.base64.encode(e.binContext,0,e.binContext.length):t.bytes===Array?Array.prototype.slice.call(e.binContext):e.binContext),null!=e.message&&e.hasOwnProperty("message")&&(n.message=e.message),null!=e.code&&e.hasOwnProperty("code")&&(n.code=e.code),null!=e.randomId&&e.hasOwnProperty("randomId")&&(n.randomId=e.randomId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/WsMessage"},e}(),e.exports=l},8965:(e,t,n)=>{n.d(t,{I:()=>g});var r=n(4238),o=n(1869),c=n(3459),i=n(2042),a=n(1499);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var l=r&&r.prototype instanceof a?r:a,s=Object.create(l.prototype);return u(s,"_invoke",function(n,r,o){var c,a,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return c=t,a=0,l=e,f.n=n,i}};function p(n,r){for(a=n,l=r,t=0;!d&&s&&!o&&t<u.length;t++){var o,c=u[t],p=f.p,m=c[2];n>3?(o=m===r)&&(l=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=e):c[0]<=p&&((o=n<2&&p<c[1])?(a=0,f.v=r,f.n=c[1]):p<m&&(o=n<3||c[0]>r||r>m)&&(c[4]=n,c[5]=r,f.n=m,a=0))}if(o||n>1)return i;throw d=!0,r}return function(o,u,m){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,m),a=u,l=m;(t=a<2?e:l)||!d;){c||(a?a<3?(a>1&&(f.n=-1),p(a,l)):f.n=l:f.v=l);try{if(s=2,c){if(a||(o="next"),t=c[o]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,a<2&&(a=0)}else 1===a&&(t=c.return)&&t.call(c),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=e}else if((t=(d=f.n<0)?l:n.call(r,f))!==i)break}catch(t){c=e,a=1,l=t}finally{s=1}}return{value:t,done:d}}}(n,o,c),!0),s}var i={};function a(){}function l(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(u(t={},r,function(){return this}),t),p=d.prototype=a.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,u(p,"constructor",d),u(d,"constructor",l),l.displayName="GeneratorFunction",u(d,o,"GeneratorFunction"),u(p),u(p,o,"Generator"),u(p,r,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(s=function(){return{w:c,m}})()}function u(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}u=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var c=function(t,n){u(e,t,function(e){return this._invoke(t,n,e)})};c("next",0),c("throw",1),c("return",2)}},u(e,t,n,r)}function d(e,t,n,r,o,c,i){try{var a=e[c](i),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var c=e.apply(t,n);function i(e){d(c,r,o,i,a,"next",e)}function a(e){d(c,r,o,i,a,"throw",e)}i(void 0)})}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function m(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var _="https:"===window.location.protocol?"wss:":"ws:",y=function(e){return e[e.not=0]="not",e[e.connecting=1]="connecting",e[e.connected=2]="connected",e}(y||{}),g=function(){return e=function e(t,n,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"decoder",r.b$?void 0:new o.XM),m(this,"_status",y.not),m(this,"_connect_await_promise",[]),m(this,"_self_close",!1),m(this,"_msgHandlerMap",new Map),m(this,"_msgResolveMap",new Map),m(this,"_msgResolveTimeoutMap",new Map),this._url=t,this._authHandle=n,this.name=c},t=[{key:"handMsg",value:function(e,t){t.code===c.m.Fail&&(0,i.zN)(t.message);var n=t.random_id||e,r=this._msgResolveMap.get(n);r&&(r(t),this._msgResolveMap.delete(n));var o=this._msgResolveTimeoutMap.get(n);o&&(clearTimeout(o),this._msgResolveTimeoutMap.delete(n));var a=this._msgHandlerMap.get(t.cmdType);a&&a(t)}},{key:"connect",value:(g=f(s().m(function e(){var t,n=this;return s().w(function(e){for(;;)if(0===e.n)return t=function(e){if(n._status!==y.connected)if(n._status!==y.connecting){n._status=y.connecting;var t=function(){n._status=y.not,n.decoder&&(n.decoder.removeAllListeners(),n.decoder.destroy()),n._subscribeUnconnect&&!n._self_close&&n._subscribeUnconnect(),n._self_close=!1},o=function(){var t=f(s().m(function t(o){var c;return s().w(function(t){for(;;)switch(t.n){case 0:if(console.info("ws连接成功",n.name),n._status=y.connected,n._authHandle&&n._authHandle(n._socket),e(!0),!n._connect_await_promise.length){t.n=4;break}case 1:if(!(c=n._connect_await_promise.pop())){t.n=2;break}c(!0),t.n=3;break;case 2:return t.a(3,4);case 3:t.n=1;break;case 4:r.b$||n.decoder.on("decoded",function(e){var t=new r.hf(e.data[0],e.data[1]);t.code=e.data[2],t.message=e.data[3],t.random_id=e.data[4],t.wss=n._socket,n.handMsg(t.cmdType,t)});case 5:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),c=[],i=!1,a=function(){var e=f(s().m(function e(t){var o;return s().w(function(e){for(;;)switch(e.n){case 0:r.b$?((o=r.hf.decode(t)).wss=n._socket,n.handMsg(o.cmdType,o)):n.decoder.add(t),l();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),l=function(){if(0!==c.length){i=!0;var e=c.shift();if(e instanceof ArrayBuffer)a(new Uint8Array(e));else if(e instanceof Blob){var t=new FileReader;t.onload=f(s().m(function e(){return s().w(function(e){for(;;)switch(e.n){case 0:a(new Uint8Array(t.result));case 1:return e.a(2)}},e)})),t.readAsArrayBuffer(e)}else a(e)}else i=!1},u=function(){var e=f(s().m(function e(t){return s().w(function(e){for(;;)switch(e.n){case 0:c.push(t.data),i||l();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();if(n.isAilive())e(!0);else{var d=n.name,p=new WebSocket("".concat(_,"//").concat(n._url,"?token=").concat(localStorage.getItem("token"),"&type=").concat(r.hF.data));p.addEventListener("open",o),p.addEventListener("message",u),p.addEventListener("close",function(){var e=f(s().m(function e(n){return s().w(function(e){for(;;)switch(e.n){case 0:return console.info("Disconnected from WebSocket server",d),e.n=1,t();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),p.addEventListener("error",function(e){console.error("WebSocket error:",e),t()}),n._socket=p}}else n._connect_await_promise.push(e);else e(!0)},e.a(2,new Promise(t))},e)})),function(){return g.apply(this,arguments)})},{key:"sendData",value:(h=f(s().m(function e(t,n,o){var c;return s().w(function(e){for(;;)if(0===e.n)return(c=new r.hf(t)).context=n,o&&(c.random_id=(0,a.hU)(9)),e.a(2,this.send(c))},e,this)})),function(e,t,n){return h.apply(this,arguments)})},{key:"send",value:(d=f(s().m(function e(t){var n,r=this;return s().w(function(e){for(;;)switch(e.n){case 0:if(!this._promise){e.n=2;break}return e.n=1,this._promise;case 1:this._promise=null;case 2:return e.n=3,this.connect();case 3:return n=t.encode(),e.a(2,new Promise(function(e,o){var c=t.random_id||t.cmdType,i=setTimeout(function(){e(null),console.info("ws超时",c)},6e3);if(r._msgResolveMap.set(c,e),r._msgResolveTimeoutMap.set(c,i),Array.isArray(n))for(var a=0;a<n.length;a++)r._socket.send(n[a]);else r._socket.send(n)}))}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"setPromise",value:function(e){this._promise=new Promise(function(){var t=f(s().m(function t(n){return s().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e(n);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"isAilive",value:function(){return!(this._status!==y.connected||!this._socket||this._socket.readyState!==WebSocket.OPEN)}},{key:"subscribeUnconnect",value:function(e){this._subscribeUnconnect=e}},{key:"unSubscribeUnconnect",value:function(){this._subscribeUnconnect=null}},{key:"unConnect",value:(u=f(s().m(function e(){return s().w(function(e){for(;;)switch(e.n){case 0:this.isAilive()&&(console.info("主动关闭客户端",this.name),this._self_close=!0,this._socket.close()),this._status=y.not,this._msgHandlerMap.clear();case 1:return e.a(2)}},e,this)})),function(){return u.apply(this,arguments)})},{key:"addMsg",value:(l=f(s().m(function e(t,n){return s().w(function(e){for(;;)switch(e.n){case 0:this._msgHandlerMap.set(t,n);case 1:return e.a(2)}},e,this)})),function(e,t){return l.apply(this,arguments)})},{key:"removeMsg",value:function(e){this._msgHandlerMap.delete(e)}}],n=[{key:"getOtherWebSocket",value:function(e){return new WebSocket("".concat(_,"//").concat(window.location.host+window.location.pathname,"?token=").concat(localStorage.getItem("token"),"&type=").concat(r.hF.other,"&code=").concat(e))}},{key:"getOtherWebSocketUrl",value:function(e,t){for(var n="".concat(_,"//").concat(window.location.host+window.location.pathname,"?token=").concat(localStorage.getItem("token"),"&type=").concat(r.hF.other,"&code=").concat(e),o=0,c=Object.keys(t);o<c.length;o++){var i=c[o];n+="&".concat(i,"=").concat(encodeURIComponent(t[i]))}return n}}],t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,l,u,d,h,g}()}}]);